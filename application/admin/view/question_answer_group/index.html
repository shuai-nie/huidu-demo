{include file="moban/bone_header"}

<table class="layui-hide" id="think-table" lay-filter="think-table"></table>

<script type="text/html" id="toolbarDemo">
    <span class="layui-btn layui-btn-normal layui-btn-sm" lay-event="create"><i class="layui-icon layui-icon-add-1"></i>{:lang('create')}</span>
</script>

<script type="text/html" id="barDemo">
    <span class="layui-btn layui-btn-xs layui-btn-warm" lay-event="edit"><i class="layui-icon layui-icon-edit"></i>{:lang('edit')}</span>
    <span class="layui-btn layui-btn-xs layui-btn-danger" lay-event="del"><i class="layui-icon layui-icon-delete"></i>{:lang('delete')}</span>
</script>

<script>
layui.use(['table'], function(){
    var table = layui.table;

    UI.getPageTable(table, "{:url('')}", [
        {field: 'key', title: '', width:80, fixed: 'left', align: 'center'}
        ,{field: 'title', title: '模版名称', width:300,}
        ,{field: 'cou', title: '数量', width:70, align: 'center'}
        ,{fixed: 'right',title:'操作', width:170, align:'center', toolbar: '#barDemo'}
    ], "#think-table", "auth");

    table.on('tool(think-table)', function(obj){
        var data=obj.data;
        if(obj.event==="edit"){
            UI.openLayer("{:url('edit')}?id="+data['id'], 850, 600, '#submit', "{:lang('edit')}");
        }else if(obj.event==='del'){
            UI.delete(data['id'], function(res){
                if(res.code==200){
                    table.reload("table");
                }
            });
        }
    });

    table.on('toolbar(think-table)', function(obj){
        if(obj.event==='create'){
            UI.openLayer("{:url('create')}", 850, 600, '#submit', "{:lang('create')}");
        }
    })

});
</script>
{include file="moban/bone_footer"}