{include file="moban/bone_header"}

<table class="layui-hide" id="think-table" lay-filter="think-table"></table>

<script type="text/html" id="toolbarDemo">
    {if condition="checkAuth('groupadd')"}
    <a class="layui-btn layui-btn-sm" lay-event="create">{:lang('create')}</a>
    {/if}
</script>

<script type="text/html" id="barDemo">
    {{# if(d['id']!=1){ }}
    {if condition="checkAuth('groupedit')"}
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    {/if}
    <a class="layui-btn layui-btn-xs" lay-event="juri">权限</a>
    {if condition="checkAuth('del_group')"}
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
    {/if}
    {if condition="!checkAuth('del_group') and !checkAuth('groupedit')"}
    暂无任何权限
    {/if}
    {{# }else{
    return "禁止修改";
    } }}
</script>

<script>
layui.use('table', function () {
    var table = layui.table;

    UI.getPageTable(table, "{:url('')}", [
        {field: 'id', title: 'ID', width: 80, sort: true, fixed: 'left'}
        , {field: 'group_name', title: '用户组名称', width: 120}
        , {fixed: 'right', title: '操作', width: 220, align: 'center', toolbar: '#barDemo'}
    ], "#think-table", 'auth');

    table.on('toolbar(think-table)', function (obj) {
        if (obj.event === "create") {
            UI.openLayer("{:url('add')}", 500, 260, '#submit', "{:lang('create')}");
        }
    })

    table.on('tool(think-table)', function (obj) {
        var data = obj.data;
        if (obj.event === "edit") {
            UI.openLayer("{:url('edit')}?id=" + data['id'], 500, 260, '#submit', "{:lang('edit')}", function () {
                table.reload("table");
            });
        } else if (obj.event === 'del') {
            UI.delete(data['id'], function (res) {
                if (res.code == 200) {
                    table.reload("table");
                }
            });
        } else if (obj.event === 'juri') {
            UI.openLayer("{:url('juri')}?id=" + data['id']);
        }
    });

});
</script>
{include file="moban/bone_footer"}