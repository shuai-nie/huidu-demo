{include file="moban/bone_header"}

<!--<div class="layui-btn-container" style="display: inline-block">-->
<!--    <button class="layui-btn" data-type="addGroup">添加</button>-->
<!--</div>-->

<table class="layui-hide" id="think-table" lay-filter="think-table"></table>

<script id="barDemo" type="text/html">
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>

<script>
    layui_function = layui.use('table', function () {
        var table = layui.table;
        UI.getPageTable(table, "{:url('')}", [
            {field: 'id', title: 'ID', width: 80, sort: true, fixed: 'left'}
            , {field: 'key', title: '键'}
            , {field: 'remarks', title: '备注'}
            , {fixed: 'right', title: '操作', align: 'center', toolbar: '#barDemo'}
        ]);
        table.on('tool(think-table)', function (obj) {
            var data = obj.data;
            var msg = obj.msg;
            //修改
            if (obj.event === "edit") {
                UI.openLayer("{:url('edit')}?id=" + data['id']);
            }
            //删除
            if (obj.event === 'del') {
                // alert(123);
                UI.delete(data['id'], function (res) {
                    if (res.code == 200) {
                        table.reload("think-table");
                    }
                });
            }
        });
        var $ = layui.$, active = {
            addGroup: function () {
                UI.openLayer("{:url('add')}");
            }
        };


        $('.layui-btn-container .layui-btn').on('click', function () {
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
    });
</script>
{include file="moban/bone_footer"}